<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="products.css">
</head>
<body>
    
    <h2>welcome to products....</h2>
    <button onclick="logout()">Logout...</button>
    <br>
    <br>
    <div id="container"></div>
</body>
</html>
<script>

    let container = document.getElementById("container")

    let getdata = async(URL)=>{
        let res = await fetch(URL)
        let data =await res.json()
        fetchdata(data)
        // console.log(data)
    
        }

        
        let fetchdata = (products)=>{
            container.innerHTML=""
            products.forEach(ele=>{
                let div= document.createElement("div")
                
                let title = document.createElement("h3")
                title.innerText = `title:- ${ele.title}`
                title.style.margin="0px"
                
                let img = document.createElement("img")
                img.src = ele.src
                
                let  price = document.createElement("p")
                price.innerText = `Price:-${ele.price}`
                price.style.margin="0px"
            
                let productid = document.createElement("p")
                productid.innerText =  `ProductId:- ${ ele.productId}`
                productid.style.margin="0px"

                let rating = document.createElement("p")
                rating.innerText =  `Rating:- ${ ele.ratings}`
                rating.style.margin="0px"

                let cartbtn = document.createElement("button")
                cartbtn.textContent="Add to cart"
                cartbtn.addEventListener("click",function(){})
            
                // let deletebtn = document.createElement("button");
                // deletebtn.textContent="Delete"

                div.append(img ,productid , title , price ,rating ,cartbtn  )
                container.append(div)
                
            })
            
            
        }
        getdata("http://localhost:3000/products")

function logout(){
    localStorage.removeItem("login")
    alert("Loged out...")
    window.location.href="login.html"
}

async function cartbtn(el,i){
    let res = await fetch(" http://localhost:3000/users")
    let data =  await res.json();
    fetch("http://localhost:3000/allUsersCart",{
        method:"POST",
        headers:{
            "Content-Type":"application/json"
        },
        body:JSON.stringify(data)
    })
    console.log(data[login.name])
       
}     
        
</script>